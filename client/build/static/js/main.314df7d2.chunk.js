(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),s=n(5),o=n.n(s),l=n(10),u=n(7),j=n(177),d=n(178),b=n(110),p=Object(b.a)({palette:{primary:{main:"#8EBF73",dark:"#4A7D3D",light:"#e8f5e9",contrastText:"#fefefe"},secondary:{main:"#ff5252",dark:"#b23939",light:"#ff7474",contrastText:"#fefefe"},grey:{main:"#212121"},white:{dark:"#eee",main:"#fefefe"}}}),h=n(1);var f=function(e){return Object(h.jsxs)(j.a,{theme:p,children:[Object(h.jsx)(d.a,{}),Object(h.jsx)("div",{children:e.children})]})},x=n(40),O=n(15),m=n(11),g=n(113),v=n(226),y=n(185),k=n(230),w=n(186),C=n(188),S=n(187),I=n(22),A=n(30),D={API_URL:"https://quiet-forest-60077.herokuapp.com"};var N=function(e){var t=e.classes,n=e.onAuthenticate,r=Object(a.useState)({username:"",password:""}),c=Object(u.a)(r,2),i=c[0],s=c[1],j=Object(a.useState)(!1),d=Object(u.a)(j,2),b=d[0],p=d[1],f=Object(a.useState)(!1),x=Object(u.a)(f,2),N=x[0],L=x[1],R=Object(a.useState)(!1),E=Object(u.a)(R,2),F=E[0],T=E[1],P=Object(O.f)(),W=Object(I.b)().enqueueSnackbar,z=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),L(!0),e.prev=2,e.next=5,fetch("".concat(D.API_URL,"/auth/obtain/"),{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});case 5:if(200!==(a=e.sent).status){e.next=14;break}return e.next=9,a.json();case 9:r=e.sent,b&&localStorage.setItem("username",i.username),n(r),e.next=15;break;case 14:401===a.status?W("Incorrect credentials",{variant:"error"}):404===a.status&&W("No such user with that username",{variant:"error"});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),W("Something went wrong, please try again",{variant:"error"}),console.log(e.t0);case 21:L(!1);case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=Object(m.a)({},i);t[e.target.id]=e.target.value,s(t)};return Object(a.useEffect)((function(){""!==i.username&&""!==i.password&&T(!0)}),[i]),Object(a.useEffect)((function(){var e=localStorage.getItem("username");null!=e&&(p(!0),s((function(t){return Object(m.a)(Object(m.a)({},t),{},{username:e})})))}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Log in"})}),Object(h.jsxs)("form",{onSubmit:z,method:"POST",className:t.form,noValidate:!0,autoComplete:"off",children:[Object(h.jsx)(g.a,{variant:"h6",children:"Log in to your account to continue"}),Object(h.jsx)(v.a,{type:"text",id:"username",value:i.username,onChange:B,fullWidth:!0,autoComplete:"username",autoFocus:!0,margin:"normal",variant:"filled",label:"username",disabled:N}),Object(h.jsx)(v.a,{label:"password",type:"password",variant:"filled",id:"password",value:i.password,onChange:B,margin:"normal",fullWidth:!0,autoComplete:"current-password",disabled:N}),Object(h.jsx)(y.a,{control:Object(h.jsx)(k.a,{value:b,onChange:function(){return p(!b)},color:"primary",disabled:N}),label:"Remember me"}),Object(h.jsx)(w.a,{margin:"normal",onClick:z,variant:"contained",color:"primary",fullWidth:!0,className:t.submit,endIcon:N?null:Object(h.jsx)(S.a,{}),disabled:!N&&!F,children:N?Object(h.jsx)(C.a,{size:"1.5rem",color:"inherit"}):"Log in"}),Object(h.jsx)(w.a,{size:"small",onClick:function(){return P.replace("/auth/create")},disabled:N,children:"Make an account"})]},"2")]})};var L=function(e){var t=e.classes,n=e.loading,r=e.setLoading,c=e.onAuthenticate,i=Object(I.b)().enqueueSnackbar,s=Object(a.useState)(!1),j=Object(u.a)(s,2),d=j[0],b=j[1],p=Object(a.useState)({email:{value:"",type:"email",label:"Email",validation:{minLength:4},error:{ex:!1,text:""}},username:{type:"text",label:"Username",value:"",validation:{minLength:10},error:{ex:!1,text:""}},password:{value:"",label:"Password",type:"password",validation:{minLength:6},error:{ex:!1,text:""}},"password-confirm":{value:"",label:"Confirm password",type:"password",error:{ex:!1,text:""},validation:{minLength:6}}}),f=Object(u.a)(p,2),x=f[0],y=f[1],k=Object(O.f)(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,s,l,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!d){e.next=34;break}return r(!0),n={email:x.email.value,username:x.username.value,password:x.password.value},e.prev=4,e.next=7,fetch("".concat(D.API_URL,"/auth/create/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:if(200!==(a=e.sent).status){e.next=16;break}return e.next=11,a.json();case 11:s=e.sent,c(s),r(!1),e.next=28;break;case 16:if(302!==a.status){e.next=27;break}return e.next=19,a.text();case 19:l=e.sent,u=l.split(" ")[0],(j=Object(m.a)({},x))[u]=Object(m.a)(Object(m.a)({},j[u]),{},{error:{ex:!0,text:l}}),y(j),r(!1),e.next=28;break;case 27:400===a.status&&(i("Sign up form is incomplete or incorrect",{variant:"error"}),r(!1));case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(4),i("Something went wrong, please try again",{variant:"error",autoHideDuration:3e3}),r(!1);case 34:case"end":return e.stop()}}),e,null,[[4,30]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=Object(m.a)({},x);t[e.target.id].value=e.target.value,y(t)};return Object(a.useEffect)((function(){var e=function(e){var t=Object(m.a)({},e);return Object.keys(e).forEach((function(n){var a=Object(m.a)({},e[n]);if(a.value.length<a.validation.minLength)return a.error={ex:!0,text:"".concat(a.label," needs to be at least ").concat(a.validation.minLength," characters")},void(t[n]=a);a.error={ex:!1,text:""},t[n]=a,"password-confirm"===n&&e[n].value!==e.password.value&&(a.error={ex:!0,text:"Passwords do not match"})})),t}(x);Object.keys(e).forEach((function(e){b(!x[e].error.ex&&true)})),b(true)}),[x]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Register"})}),Object(h.jsxs)("form",{onSubmit:N,method:"POST",className:t.form,noValidate:!0,autoComplete:"off",children:[Object(h.jsx)(g.a,{variant:"h6",children:"Create an account to continue"}),Object.keys(x).map((function(e){return Object(h.jsx)(v.a,{type:x[e].type,value:x[e].value,fullWidth:!0,id:e,variant:"filled",label:x[e].label,margin:"normal",onChange:L,autoFocus:"email"===x[e].type,disabled:n,error:x[e].error.ex,helperText:x[e].error.text},e)})),Object(h.jsxs)("div",{className:t.buttonContainer,children:[Object(h.jsx)(w.a,{margin:"normal",onClick:N,variant:"contained",color:"primary",fullWidth:!0,className:t.submit,endIcon:n?null:Object(h.jsx)(S.a,{}),children:n?Object(h.jsx)(C.a,{size:"1.5rem",color:"white"}):"Create Account"}),Object(h.jsx)(w.a,{size:"small",onClick:function(){return k.replace("/auth")},children:"Log in to existing account"})]})]},"1")]})},R=n(180),E=n(189),F=n(227),T=n.p+"static/media/logo-sa.66601056.svg",P={fontSize:"2rem",fontWeight:300,cursor:"pointer"},W=Object(R.a)((function(e){return{Logo:Object(m.a)(Object(m.a)({},P),{},{color:e.palette.primary.contrastText}),Span:{color:e.palette.primary.dark},SpanDark:{color:e.palette.primary.dark},Logodark:Object(m.a)(Object(m.a)({},P),{},{color:e.palette.text.primary})}}));var z=function(e){var t=e.dark,n=e.orientation,a=e.hideText,r=W(),c=Object(O.f)();return Object(h.jsxs)(F.a,{display:"flex",onClick:function(){return c.push("/")},flexDirection:"horizontal"===n?"row":"column",alignItems:"center",children:[Object(h.jsx)("img",{src:T,alt:"",width:30}),a?null:Object(h.jsx)(F.a,{pl:"horizontal"===n?1:0,children:Object(h.jsxs)(g.a,{className:t?r.Logodark:r.Logo,children:[Object(h.jsx)("span",{className:t?r.SpanDark:r.Span,children:"Lem"}),"Bas"]})})]})},B=Object(R.a)((function(e){return{formContainer:{padding:e.spacing(10,5)},form:{width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},buttonContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"start"},greenBox:{backgroundColor:e.palette.primary.dark,background:"linear-gradient(to right, ".concat(e.palette.primary.dark,", ").concat(e.palette.primary.main,")"),flex:1},submit:{margin:e.spacing(3,0,2),color:e.palette.white,fontWeight:e.typography.fontWeightBold,backgroundColor:e.palette.primary.main,"&hover":{backgroundColor:e.palette.primary.dark}},authContainer:{minHeight:"100vh",flex:1},authHeader:{fontSize:"3rem",fontStyle:"italic"}}}));var U=function(e){var t=e.auth,n=e.setAuth,r=e.mainAppLoading,c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(O.g)().path,j=B(),d=Object(O.f)(),b=function(e){localStorage.setItem("Key",e.Key),n({isAuthenticated:!0,Key:e.Key})};return Object(a.useEffect)((function(){t.isAuthenticated&&!r&&d.push("/app/")}),[t.isAuthenticated,r,d]),Object(h.jsx)(I.a,{maxSnack:2,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(h.jsx)(E.a,{container:!0,justify:"space-evenly",className:j.authContainer,children:Object(h.jsxs)(F.a,{py:10,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(h.jsx)(z,{dark:!0}),Object(h.jsx)(F.a,{pt:5}),Object(h.jsxs)(O.c,{basepath:!0,children:[Object(h.jsx)(O.a,{path:"".concat(l,"/create"),children:Object(h.jsx)(L,{onAuthenticate:b,classes:j,loading:s,setLoading:o})}),Object(h.jsx)(O.a,{exact:!0,path:"".concat(l),children:Object(h.jsx)(N,{onAuthenticate:b,classes:j,loading:s,setLoading:o})})]})]})})})},M=n(191),q=n(192),G=n(193),H=n(194),_=n(13),Y=n(231),V=n(144);var K=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(h.jsx)(E.a,{item:!0,lg:6,md:6,sm:6,xs:6,children:Object(h.jsx)(V.a,{in:r,children:Object(h.jsx)("img",{className:e.className,src:e.src,onLoad:function(){return c(!0)},alt:e.alt})})})},Q=Object(R.a)((function(e){var t;return{GridContainer:(t={height:"calc(100vh - 80px)"},Object(_.a)(t,e.breakpoints.down("md"),{alignItems:"flex-start",flexDirection:"column"}),Object(_.a)(t,e.breakpoints.up("md"),{alignItems:"center",flexDirection:"row"}),Object(_.a)(t,e.breakpoints.down("sm"),{paddingTop:"5rem"}),t),GetStarted:Object(_.a)({fontWeight:"bold",fontSize:"1.1rem",padding:"0.7rem 3rem"},e.breakpoints.down("sm"),{fontSize:"0.8rem"}),Header:Object(_.a)({fontSize:"4rem",fontWeight:"900",color:e.palette.grey[900]},e.breakpoints.down("sm"),{fontSize:"2.5rem"}),SubHeader:{fontWeight:300,fontSize:"1.5rem",color:e.palette.grey[700]},ImageGrid:{overflow:"hidden"},GridImage:{width:"100%"}}}));var J=function(e){var t=Q(),n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],i=r[1],s=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D.API_URL,"/api/recipes/listall/?limit=5"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,i(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return s()}),[]),Object(h.jsxs)(E.a,{container:!0,justify:"space-evenly",className:t.GridContainer,children:[Object(h.jsxs)(E.a,{item:!0,lg:6,md:6,sm:6,xs:8,children:[Object(h.jsx)(F.a,{pb:3,children:Object(h.jsx)(g.a,{variant:"h1",className:t.Header,children:"Reach your health goals by getting the perfect mealplan"})}),Object(h.jsx)(F.a,{pb:3,children:Object(h.jsx)(g.a,{className:t.SubHeader,children:"When you know exactly how much and what you should eat, reaching your goals becomes a piece of cake"})}),Object(h.jsx)(w.a,{variant:"contained",color:"primary",className:t.GetStarted,onClick:e.navigate,children:"Get started"})]}),Object(h.jsx)(Y.a,{mdDown:!0,children:Object(h.jsx)(E.a,{item:!0,container:!0,lg:6,md:6,spacing:0,alignContent:"flex-start",alignItems:"flex-start",className:t.ImageGrid,children:c.map((function(e){return Object(h.jsx)(K,{src:e.ImageURL,className:t.GridImage,alt:e.Title},e.ID)}))})})]})},$=Object(R.a)((function(e){return{ToolBar:{justifyContent:"space-between",padding:"2rem 0 0 0",borderBottom:"#eee 1px solid"},NavLink:{color:"inherit",padding:2,margin:"0 0.5rem",fontWeight:700,fontSize:"0.9rem",whiteSpace:"nowrap"},slantedDiv:{width:"100%",height:"60%",position:"absolute",bottom:0,left:0,backgroundColor:e.palette.primary.main,clipPath:"polygon(0 80%, 50% 60%, 80% 10%, 100% 0, 100% 100%, 0 100%)",zIndex:-1}}}));var X=function(e){var t=Object(O.f)(),n=$();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(M.a,{color:"transparent",elevation:0,position:"relative",children:Object(h.jsx)(q.a,{maxWidth:"lg",children:Object(h.jsxs)(G.a,{className:n.ToolBar,children:[Object(h.jsx)(z,{dark:!0,orientation:"horizontal"}),Object(h.jsxs)(F.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",children:[Object(h.jsx)(H.a,{className:n.NavLink,to:"/auth/",component:x.b,children:"Log In"}),Object(h.jsx)(H.a,{className:n.NavLink,to:"/auth/create/",component:x.b,children:"Create an Account"})]})]})})}),Object(h.jsx)(q.a,{maxWidth:"lg",children:Object(h.jsx)(J,{navigate:function(){return t.push("/auth/")}})})]})},Z=n(27),ee=n(190),te=n(143),ne=n(195),ae=n(196),re=n(197),ce=n(198),ie=n(199),se=n(200),oe=n(201),le=n(202),ue=n(203),je=Object(R.a)((function(e){var t,n;return{"@keyframes navbutSlideIn":{"0%":{opacity:0,transform:"translateY(-50%)"},"100%":{opacity:1,transform:"translateY(0)"}},MainContainer:(t={width:"100%",minHeight:"95vh",backgroundColor:"#f6f6f6",maxWidth:e.breakpoints.values.xl},Object(_.a)(t,e.breakpoints.up("lg"),{boxShadow:e.shadows[3],overflow:"hidden",borderRadius:e.shape.borderRadius}),Object(_.a)(t,e.breakpoints.down("md"),{height:"100vh"}),t),Nav:{backgroundColor:"#FFF",maxHeight:"100vh",height:"100%",width:"100%",padding:"2rem 1rem",zIndex:1001},DrawerGridItem:Object(_.a)({zIndex:1e3,backgroundColor:"#fff",borderRight:"1px solid #eee"},e.breakpoints.down("sm"),{position:"absolute",height:"100%",width:"100vw"}),MainScreenNav:{width:"100%",display:"flex",borderBottom:"1px solid #eee",backgroundColor:"#fff",position:"absolute",padding:"2rem 1rem",top:0,left:0,"& > div":{flexGrow:1,display:"flex",justifyContent:"center"}},MenuOpenButton:{},SiteBody:(n={background:"linear-gradient(to bottom right, ".concat(e.palette.primary.main,", ").concat(e.palette.primary.dark,")")},Object(_.a)(n,e.breakpoints.up("lg"),{padding:e.spacing(2)}),Object(_.a)(n,"display","flex"),Object(_.a)(n,"justifyContent","center"),Object(_.a)(n,"minHeight","100vh"),n),NavButton:{marginBottom:e.spacing(3),fontWeight:500,animation:"$navbutSlideIn .5s ".concat(e.transitions.easing.easeIn)}}}));var de=function(e){var t=e.appRoute,n=e.handleRouteChange,r=e.handleLogoutButtonPressed,c=e.children,i=e.goBack,s=e.userInfo,o=Object(a.useState)(!1),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),f=p[0],x=p[1],O=Object(Z.a)(),m=Object(ee.a)(O.breakpoints.down("sm")),v=je();return Object(h.jsx)(F.a,{className:v.SiteBody,children:Object(h.jsxs)(E.a,{container:!0,className:v.MainContainer,children:[Object(h.jsx)(E.a,{item:!0,xl:f?2:1,lg:f?2:1,md:f?3:1,style:{right:m&&j?0:"100%"},className:v.DrawerGridItem,children:Object(h.jsxs)(F.a,{display:"flex",flexDirection:"column",className:v.Nav,children:[Object(h.jsxs)(F.a,{display:"flex",justifyContent:m?"space-between":"center",alignItems:"center",children:[m?Object(h.jsx)(te.a,{onClick:function(){return d(!1)},children:Object(h.jsx)(ne.a,{})}):null,Object(h.jsx)(F.a,{pr:m?5:0,children:Object(h.jsx)(z,{dark:!0,orientation:m?"vertical":"horizontal",hideText:!f})}),m?Object(h.jsx)(F.a,{children:" "}):null]}),Object(h.jsx)(F.a,{display:"flex",flexDirection:"column",mt:10,flexGrow:1,alignSelf:"stretch",children:[{url:"/",label:"Home",activeHook:"home",startIcon:Object(h.jsx)(ae.a,{})},{url:"/planner",label:"Meal Planner",activeHook:"meal planner",startIcon:Object(h.jsx)(re.a,{})},{url:"/recipes",label:"Recipes",activeHook:"recipes",startIcon:Object(h.jsx)(ce.a,{})},{url:"/profile",label:"My Profile",activeHook:"profile",startIcon:Object(h.jsx)(ie.a,{})},{url:"/about",label:"About This App",activeHook:"about",startIcon:Object(h.jsx)(se.a,{})}].map((function(e,a){var r=e.activeHook===t;return Object(h.jsx)(w.a,{size:"large",fullWidth:!0,variant:r?"contained":"text",color:r?"primary":"default",className:v.NavButton,startIcon:e.startIcon,disableElevation:!0,onClick:function(){n(e.url,e.activeHook),m&&d(!1)},children:f?e.label:""},2*a)}))}),f?Object(h.jsx)(F.a,{pb:2,children:Object(h.jsxs)(g.a,{align:"center",children:["Logged in as"," ",Object(h.jsx)(g.a,{component:"span",color:"primary",children:s.username})]})}):null,Object(h.jsx)(w.a,{onClick:r,startIcon:Object(h.jsx)(oe.a,{}),children:f?"Log out":""})]})}),Object(h.jsx)(E.a,{item:!0,xl:f?10:11,lg:f?10:11,md:f?9:11,sm:12,xs:12,children:Object(h.jsxs)(F.a,{px:m?1:2,pb:m?1:2,pt:20,position:"relative",children:[Object(h.jsxs)(G.a,{className:v.MainScreenNav,children:[Object(h.jsx)(te.a,{className:v.MenuOpenButton,onClick:function(){return m?d((function(e){return!e})):x((function(e){return!e}))},children:Object(h.jsx)(le.a,{})}),m?null:Object(h.jsx)(te.a,{onClick:i,children:Object(h.jsx)(ue.a,{})}),m?Object(h.jsx)("div",{children:Object(h.jsx)(z,{dark:!0,orientation:"horizontal"})}):null]}),c]})})]})})},be=n(183),pe=n(181),he=n(182),fe=n(232),xe=n(228),Oe=n(85),me=n(233),ge=n(204),ve=n(114),ye=n.p+"static/media/bulbfish400_x_300.a061136a.jpeg",ke=Object(R.a)({FormContainer:{overflow:"hidden"},FormHeader:{backgroundImage:"linear-gradient(#47824abb, #47824a), url(".concat(ye,")"),height:150,backgroundPosition:"center",backgroundSize:"120%"},FormHeaderText:{color:"#fff",fontWeight:700},FormPaper:{margin:"0 auto",transform:"translateY(-5%)"},FormSubmit:{padding:"0.5rem",fontWeight:700}}),we=function(e){var t=e.children,n=e.title,a=e.submit,r=e.cancel,c=e.cancelText,i=e.saveButtonText,s=e.loading,o=Object(Z.a)(),l=Object(ee.a)(o.breakpoints.down("sm")),u=ke();return Object(h.jsx)(be.a,{in:!0,children:Object(h.jsx)(q.a,{maxWidth:"md",children:Object(h.jsxs)(ve.a,{className:u.FormContainer,elevation:0,children:[Object(h.jsx)(F.a,{className:u.FormHeader,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",pl:l?1:2,children:Object(h.jsx)(g.a,{variant:"h4",className:u.FormHeaderText,children:n})}),Object(h.jsx)(F.a,{pl:l?1:2,pr:l?1:2,children:Object(h.jsx)(ve.a,{className:u.FormPaper,elevation:1,children:Object(h.jsx)(F.a,{p:l?1:2,children:Object(h.jsxs)("form",{children:[t,Object(h.jsxs)(F.a,{display:"flex",justifyContent:"stretch",children:[Object(h.jsx)(F.a,{pr:1,children:Object(h.jsx)(w.a,{className:u.FormSubmit,onClick:r,color:"secondary",children:c||"Cancel"})}),Object(h.jsx)(w.a,{fullWidth:!0,color:"primary",className:u.FormSubmit,variant:"contained",onClick:a,disableElevation:!0,children:s?Object(h.jsx)(C.a,{}):i})]})]})})})})]})})})},Ce=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D.API_URL,"/api/profile/getactivityoptions/"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Se=function(e){var t=e.validForMG,n=e.refetch,r=e.handleAuthenticatedEndpointRequest,c=e.profile,i=e.path,s=Object(O.f)(),j=Object(I.b)().enqueueSnackbar,d=Object(a.useState)(!1),b=Object(u.a)(d,2),p=b[0],f=b[1],x=Object(me.a)((function(e){return new Promise(function(){var t=Object(l.a)(o.a.mark((function t(n,a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r("".concat(D.API_URL,"/api/profile/update/"),"PUT",e);case 3:if(200!==t.sent.status){t.next=6;break}return t.abrupt("return",n());case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",a(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}),{onSuccess:function(){console.log("update 200"),n(),j("Profile update succesful",{variant:"success"}),s.push(i)},onError:function(e){j("Something went wrong updating your profile. Please try again at a later time",{variant:"error"}),s.push(i)}}),k=Object(Oe.a)({initialValues:{weight:0,height:0,gender:"male",dob:"2021-02-15",loa:""},onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0),n=Object(m.a)({},t),a=new Date(n.dob),n.dob=a.toISOString(),x.mutate(JSON.stringify(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),w=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date(t.Dob),a="".concat(n.getFullYear(),"-").concat(n.getMonth()<10?"0":"").concat(n.getMonth()+1,"-").concat(n.getDate()<10?"0":"").concat(n.getDate()),e.next=4,k.setFieldValue("height",t.Height);case 4:return e.next=6,k.setFieldValue("weight",t.Weight);case 6:return e.next=8,k.setFieldValue("gender",t.Gender);case 8:return e.next=10,k.setFieldValue("dob",a);case 10:return e.next=12,k.setFieldValue("loa",t.Loa);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=Object(ge.a)("loa",Ce),A=S.data,N=S.isLoading,L=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setFieldValue(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){w(c)}),[]),Object(h.jsx)(be.a,{in:!p,children:x.isLoading?Object(h.jsx)(F.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(h.jsx)(C.a,{})}):Object(h.jsxs)(we,{cancel:function(){s.goBack()},submit:k.handleSubmit,title:"Update your profile",saveButtonText:"Save profile",children:[t?Object(h.jsx)(g.a,{color:"primary",children:"Your profile is ready for mealplan generation"}):Object(h.jsx)(g.a,{children:"You need to fill in some extra things in order for mealgeneration to work"}),Object(h.jsx)(F.a,{p:2,pl:0,children:Object(h.jsx)(v.a,{value:k.values.height,onChange:k.handleChange,type:"number",id:"height",name:"height",label:"Height in CM"})}),Object(h.jsx)(F.a,{p:2,pl:0,children:Object(h.jsx)(v.a,{value:k.values.weight,onChange:k.handleChange,type:"number",id:"weight",name:"weight",label:"Weight in KG"})}),Object(h.jsx)(F.a,{p:2,pl:0,children:Object(h.jsx)(v.a,{value:k.values.dob,onChange:k.handleChange,type:"date",id:"dob",name:"dob",label:"Date of Birth"})}),N?Object(h.jsx)(C.a,{}):Object(h.jsx)(F.a,{p:2,children:Object(h.jsxs)(pe.a,{component:"fieldset",children:[Object(h.jsx)(he.a,{component:"legend",children:"Level of Activity"}),Object(h.jsx)(fe.a,{"aria-label":"loa",name:"loa",children:Object.keys(A).map((function(e){var t=A[e];return Object(h.jsx)(y.a,{onClick:function(){return L("loa",e)},value:k.values.loa,control:Object(h.jsx)(xe.a,{checked:e===k.values.loa,centerRipple:!0,color:"primary"}),label:"".concat(e[0].toUpperCase()+e.slice(1,e.length),": ").concat(t.Description),checked:e===k.values.loa,name:"loa",id:"loa"},e)}))})]})}),Object(h.jsx)(F.a,{p:2,children:Object(h.jsxs)(pe.a,{component:"fieldset",children:[Object(h.jsx)(he.a,{component:"legend",children:"Gender"}),Object(h.jsx)(fe.a,{"aria-label":"gender",name:"gender",children:["male","female"].map((function(e){return Object(h.jsx)(y.a,{onClick:function(){return L("gender",e)},value:k.values.gender,control:Object(h.jsx)(xe.a,{checked:e===k.values.gender,centerRipple:!0,color:"primary"}),label:"".concat(e[0].toUpperCase()+e.slice(1,e.length)),checked:e===k.values.gender,name:"gender",id:"gender"},e)}))})]})})]})})},Ie=n(206),Ae=n(205),De=Object(R.a)((function(e){return{profileContainer:{overflow:"hidden"},mainInfoContainer:{transform:"translateY(-10%)"},banner:{background:e.palette.primary.main,width:"100%",minHeight:100},name:{fontWeight:e.typography.fontWeightBold,fontSize:e.typography.h4.fontSize},buttonWeight:{fontWeight:700}}})),Ne=function(e){var t=e.data,n=e.userInfo,a=e.validForMG,r=e.path,c=De(),i=Object(O.f)();return Object(h.jsxs)(q.a,{maxWidth:"md",children:[Object(h.jsxs)(ve.a,{className:c.profileContainer,children:[Object(h.jsx)(F.a,{className:c.banner}),Object(h.jsx)(ve.a,{className:c.mainInfoContainer,elevation:0,children:Object(h.jsxs)(F.a,{p:3,pb:1,children:[Object(h.jsx)(F.a,{py:1,children:Object(h.jsx)(g.a,{className:c.name,children:n.username[0].toUpperCase()+n.username.slice(1,n.username.length)})}),Object(h.jsxs)(E.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(h.jsx)(E.a,{item:!0,children:Object(h.jsxs)(g.a,{children:["Height:"," ",Object(h.jsx)(g.a,{className:c.buttonWeight,component:"span",children:t.Height?t.Height:"unspecified"})]})}),Object(h.jsx)(E.a,{item:!0,children:Object(h.jsx)(F.a,{px:1,children:Object(h.jsx)(g.a,{variant:"h5",component:"span",children:"\u2022"})})}),Object(h.jsx)(E.a,{item:!0,children:Object(h.jsxs)(g.a,{children:["Weight:"," ",Object(h.jsx)(g.a,{className:c.buttonWeight,component:"span",children:t.Weight?t.Weight:"unspecified"})]})}),Object(h.jsx)(E.a,{item:!0,children:Object(h.jsx)(F.a,{px:1,children:Object(h.jsx)(g.a,{variant:"h5",component:"span",children:"\u2022"})})}),Object(h.jsx)(E.a,{item:!0,children:Object(h.jsxs)(g.a,{children:["Age:"," ",Object(h.jsx)(g.a,{component:"span",className:c.buttonWeight,children:function(){var e=new Date(t.Dob);if(e.getFullYear()<=1900)return"unspecified";var n=e.getFullYear(),a=e.getMonth()+1,r=new Date,c=r.getMonth()+1,i=r.getFullYear()-n;return c<a&&i--,i}()})]})})]}),Object(h.jsx)(F.a,{children:Object(h.jsxs)(g.a,{children:["Level of activity:"," ",Object(h.jsx)(g.a,{className:c.buttonWeight,component:"span",children:t.Loa})]})}),Object(h.jsx)(F.a,{pt:3,display:"flex",justifyContent:"flex-end",children:Object(h.jsx)(w.a,{startIcon:Object(h.jsx)(Ae.a,{}),color:"primary",variant:"contained",className:c.buttonWeight,onClick:function(){return i.replace("".concat(r,"/edit"))},children:"Edit profile"})}),Object(h.jsx)(F.a,{pt:2,children:Object(h.jsx)(Ie.a,{children:Object(h.jsx)(F.a,{p:2,children:Object(h.jsx)(g.a,{variant:"body1",children:a?"Your profile is ready for mealplan generation":"Your profile is not yet ready for mealplan generation"})})})})]})})]}),Object(h.jsx)(F.a,{pt:2,children:Object(h.jsx)(ve.a,{children:Object(h.jsxs)(F.a,{p:2,children:[Object(h.jsx)(g.a,{variant:"h5",children:"Your recipes:"}),Object(h.jsx)(g.a,{children:"You have not yet created any recipes."}),Object(h.jsx)(E.a,{container:!0})]})})})]})};var Le=function(e){var t=e.auth,n=e.setActiveRoute,r=e.handleAuthenticatedEndpointRequest,c=e.validForMG,i=e.checkValidForMG,s=e.userInfo,u=Object(O.g)().path,j=Object(O.f)(),d=Object(I.b)().enqueueSnackbar,b=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat(D.API_URL,"/api/profile/"),"GET");case 3:return t=e.sent,e.abrupt("return",t.json());case 7:throw e.prev=7,e.t0=e.catch(0),console.log("Something went wrong fetching profile:",e.t0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),p=Object(ge.a)(["profile"],b),f=p.data,x=p.isLoading,m=p.refetch,g=p.isError;return Object(a.useEffect)((function(){n("profile")}),[]),Object(a.useEffect)((function(){g&&!x&&(d("something went wrong fetching your profile info. Please try again later"),j.goBack())}),[g,x,j,d]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Profile"})}),Object(h.jsx)(O.c,{children:x?Object(h.jsx)(C.a,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O.a,{path:"".concat(u),exact:!0,render:function(){return Object(h.jsx)(Ne,{data:f,userInfo:s,validForMG:c,path:u})}}),Object(h.jsx)(O.a,{path:"".concat(u,"/edit"),render:function(){return Object(h.jsx)(Se,{profile:f,path:u,refetch:m,auth:t,validForMG:c,checkValidForMG:i,handleAuthenticatedEndpointRequest:r})}})]})})]})},Re=function(e){var t=e.buttonText,n=e.onClick,a=e.color;return Object(h.jsx)(F.a,{display:"flex",justifyContent:"flex-end",children:Object(h.jsx)(w.a,{disableElevation:!0,variant:"contained",color:a,onClick:n,children:t})})},Ee=function(e){var t=e.goBack,n=e.nextStep;return Object(h.jsxs)(F.a,{display:"flex",justifyContent:"flex-end",children:[t?Object(h.jsx)(F.a,{mr:2,children:Object(h.jsx)(Re,{buttonText:"Go back",color:"secondary"})}):null,Object(h.jsx)(Re,{buttonText:"Next step",color:"primary",onClick:n})]})},Fe=function(e){var t=e.title,n=e.children;return Object(h.jsxs)(F.a,{py:3,children:[Object(h.jsx)(g.a,{variant:"h6",children:t}),n]})},Te=function(e){var t=e.submit,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),l=o[0],j=o[1];return Object(h.jsx)(Fe,{title:"Are you looking for a vegan or vegetarian mealplan?",children:Object(h.jsxs)(F.a,{pt:3,display:"flex",flexDirection:"column",children:[Object(h.jsx)(pe.a,{children:Object(h.jsx)(y.a,{control:Object(h.jsx)(k.a,{checked:c,onChange:function(){return i((function(e){return!e}))},name:"vegan",color:"primary"}),label:"Vegan"})}),Object(h.jsx)(pe.a,{children:Object(h.jsx)(y.a,{control:Object(h.jsx)(k.a,{checked:l,onChange:function(){return j((function(e){return!e}))},name:"vegetarian",color:"primary"}),label:"Vegetarian"})}),Object(h.jsx)(Ee,{goBack:null,nextStep:t})]})})},Pe=[1,6];var We=function(e){e.validForMG,e.navigate;var t=e.setActiveRoute,n=Object(I.b)().enqueueSnackbar,r=Object(a.useState)(1),c=Object(u.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),f=p[0],x=p[1];console.log(j,f);var O=Object(a.useState)(!1),m=Object(u.a)(O,2),v=m[0],y=m[1],k=Object(a.useRef)(null);Object(a.useEffect)((function(){t("meal planner")}),[]);var w=Object(a.useCallback)((function(){var e=new WebSocket("ws://localhost:8080/ws_test");k.current=e,k.current.onopen=function(){y(!0),n("succesfully connected to mealplan generator")},k.current.onmessage=C,k.current.onclose=function(e){console.log("closing connection:",e),y(!1)},k.current.onerror=function(){n("mealplan generator connection error, attempting to reconnect..."),y(!1),w()}}),[n]);Object(a.useEffect)((function(){w()}),[w]);var C=function(e){console.log(e)},S=function(){s((function(e){return e--}))};return Object(a.useEffect)((function(){x(i>1),d(i<Pe[1])}),[i]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Meal planner"})}),Object(h.jsx)(be.a,{in:v,children:Object(h.jsx)(F.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(h.jsx)(ve.a,{children:Object(h.jsxs)(F.a,{p:3,children:[Object(h.jsx)(F.a,{pb:4,children:Object(h.jsxs)(g.a,{color:"primary",children:["Step ",i," of ",Pe[1]]})}),Object(h.jsxs)(F.a,{children:[Object(h.jsx)(V.a,{direction:"right",in:1===i,unmountOnExit:!0,children:Object(h.jsx)(F.a,{children:Object(h.jsx)(Te,{submit:function(e){s(2)},goBack:S,unmountOnExit:!0})})}),Object(h.jsx)(V.a,{direction:"right",in:2===i,unmountOnExit:!0,children:Object(h.jsx)(F.a,{children:Object(h.jsx)(Te,{submit:function(e){s(3)},goBack:S})})})]})]})})})})]})},ze=n(207),Be=n(208);var Ue=function(e){var t=e.navigate,n=e.show;return Object(h.jsx)(be.a,{in:n,children:Object(h.jsx)(Ie.a,{elevation:0,children:Object(h.jsxs)(F.a,{p:2,children:[Object(h.jsxs)(ze.a,{style:{padding:8},children:[Object(h.jsx)(g.a,{variant:"h5",color:"primary",style:{fontWeight:500},children:"Your profile is not complete."}),Object(h.jsx)(g.a,{children:"You need to complete it before you can generate a personal mealplan"})]}),Object(h.jsx)(Be.a,{children:Object(h.jsx)(w.a,{variant:"contained",color:"primary",style:{fontWeight:"bold"},onClick:function(){return t("/profile/edit")},children:"Complete Profile"})})]})})})},Me=Object(R.a)((function(e){return{bannerText:{color:e.palette.grey[900],fontWeight:600,fontSize:"3em"}}}));var qe,Ge,He,_e=function(e){var t=e.navigate,n=e.validForMG,r=e.loading,c=e.userInfo,i=e.setActiveRoute,s=Me();return Object(a.useEffect)((function(){i("home")}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Home"})}),Object(h.jsxs)(F.a,{display:"flex",flexDirection:"column",children:[Object(h.jsx)(F.a,{py:2,children:Object(h.jsx)(F.a,{p:2,pl:0,children:r?null:Object(h.jsxs)(g.a,{variant:"h2",className:s.bannerText,children:["Welcome"," ",""!==c.username?Object(h.jsx)(h.Fragment,{children:c.username[0].toUpperCase()+c.username.slice(1,c.username.length)}):null]})})}),n?null:Object(h.jsx)(Ue,{navigate:t,show:!n}),Object(h.jsx)(F.a,{flex:1,pt:2,children:Object(h.jsxs)(E.a,{container:!0,spacing:2,children:[Object(h.jsx)(E.a,{item:!0,xs:12,md:6,lg:4,children:Object(h.jsx)(be.a,{in:!0,children:Object(h.jsx)(ve.a,{elevation:0,children:Object(h.jsx)(F.a,{p:2,children:Object(h.jsx)("p",{children:"Hello"})})})})}),Object(h.jsx)(E.a,{item:!0,xs:12,lg:4,md:6,children:Object(h.jsx)(be.a,{in:!0,children:Object(h.jsx)(ve.a,{elevation:0,children:Object(h.jsx)(F.a,{p:2,children:"ello"})})})}),Object(h.jsx)(E.a,{item:!0,xs:12,lg:4,md:6,children:Object(h.jsx)(be.a,{in:!0,children:Object(h.jsx)(ve.a,{elevation:0,children:Object(h.jsx)(F.a,{p:2,children:"ello"})})})})]})})]})]})},Ye=n(51),Ve=n(210),Ke=n(211),Qe=n(212),Je=n(29),$e=n(184),Xe=n(209),Ze=n(82),et=Object(R.a)((function(e){return{Container:{minWidth:"0%"},SuggestionBox:{position:"absolute",width:"100%",backgroundColor:"#fff",borderRadius:e.shape.borderRadius,boxShadow:e.shadows[1],zIndex:6,top:"100%",maxHeight:150,overflow:"scroll"}}})),tt=function(e){e.addNewIngredient;var t=e.hide,n=(e.addNewMiscIngredient,e.recipeid),r=e.handleAuthenticatedEndpointRequest,c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],j=i[1],d=Object(a.useState)([]),b=Object(u.a)(d,2),p=b[0],f=b[1],x=Object(a.useState)(!1),O=Object(u.a)(x,2),y=O[0],k=O[1],S=Object(a.useState)({}),I=Object(u.a)(S,2),A=I[0],N=I[1],L=Object(a.useState)(""),R=Object(u.a)(L,2),E=R[0],T=R[1],P=Object(a.useState)(!1),W=Object(u.a)(P,2),z=W[0],B=W[1],U=Object(a.useState)(!1),M=Object(u.a)(U,2),q=M[0],G=M[1],H=Object(a.useState)(!0),_=Object(u.a)(H,2),Y=_[0],V=_[1],K=Object(a.useState)(0),Q=Object(u.a)(K,2),J=Q[0],$=Q[1],X=Object(a.useState)(!1),Z=Object(u.a)(X,2),ee=Z[0],te=Z[1],ne=et(),ae=Object(a.useRef)(null),re=Object(a.useState)({name:"",amount:0,measurement:""}),ce=Object(u.a)(re,2),ie=ce[0],se=ce[1],oe=Object(Ze.b)(),le=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),e.next=4,fetch("".concat(D.API_URL,"/api/recipes/allingredients/?ingredient=").concat(E));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,f(n),console.log(n),G(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),G(!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){T(""),k(!1),N({}),f([]),$(0),B(!1),V(!1),se({name:"",amount:0,measurement:""}),t()},je=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,r("".concat(D.API_URL,"/api/recipes/detail/").concat(n,"/fi/"),"POST",JSON.stringify(Object(m.a)(Object(m.a)({},A),{},{amount:J,FoodIngredientID:A.ID})));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,oe.setQueryData("foodIngredients",(function(e){return[].concat(Object(Je.a)(e),[a])})),ue(),te(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),te(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,r("".concat(D.API_URL,"/api/recipes/detail/").concat(n,"/mi/"),"POST",JSON.stringify({Title:ie.name,Measurement:ie.measurement,Amount:ie.amount}));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,oe.setQueryData("miscIngredients",(function(e){return[].concat(Object(Je.a)(e),[a])})),ue(),te(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),te(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p.length>0||Y?B(!0):B(!1)}),[p.length,Y]),Object(h.jsx)(ve.a,{className:ne.Container,children:Object(h.jsx)(F.a,{p:3,children:ee?Object(h.jsx)(C.a,{}):Object(h.jsx)(h.Fragment,{children:s?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(F.a,{display:"flex",justifyContent:"space-between",flexDirection:"column",children:[Object(h.jsxs)(F.a,{mb:1,position:"relative",children:[Object(h.jsx)(v.a,{type:"text",variant:"outlined",value:E,onChange:function(e){return t=e.target.value,T(t),null!==ae.current&&clearTimeout(ae.current),void(t.length>0?ae.current=setTimeout(le,1e3):f([]));var t},label:"search for ingredient",onFocus:function(){return V(!0)},onBlur:function(){return V(!1)},fullWidth:!0}),q?Object(h.jsx)(F.a,{position:"absolute",right:"5%",top:"50%",style:{transform:"translateY(-50%)"},children:Object(h.jsx)(C.a,{})}):null,z&&p.length>0?Object(h.jsx)(F.a,{p:1,className:ne.SuggestionBox,children:Object(h.jsx)($e.a,{children:p.map((function(e){return Object(h.jsx)(Xe.a,{button:!0,onClick:function(){N(e),k(!0),T(""),B(!1)},children:e.Name},e.ID)}))})}):null]}),0===E.length?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a,{align:"center",children:"or"}),Object(h.jsx)(w.a,{onClick:function(){return j(!1)},children:"Add your own ingredient"})]}):null]}),Object(h.jsx)(F.a,{pt:3,pb:3,children:y?Object(h.jsx)(F.a,{children:Object(h.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(h.jsx)(F.a,{pr:1,children:Object(h.jsx)(v.a,{size:"small",type:"number",value:J,variant:"outlined",onChange:function(e){return $(parseFloat(e.target.value))}})}),Object(h.jsxs)(g.a,{children:[A.ServingUnit," of"," ",Object(h.jsx)("span",{style:{fontWeight:700},children:A.Name})]})]})}):null}),Object(h.jsx)(w.a,{variant:"contained",color:y&&J>0?"primary":"disabled",fullWidth:!0,disabled:J<1,style:{fontWeight:700},onClick:je,children:"Add ingredient"}),Object(h.jsx)(F.a,{pt:1,children:Object(h.jsx)(w.a,{fullWidth:!0,onClick:ue,color:"secondary",children:"Cancel"})})]}):Object(h.jsxs)(F.a,{children:[Object(h.jsxs)(F.a,{mb:2,children:[Object(h.jsx)(v.a,{type:"text",label:"Name",name:"name",id:"name",variant:"outlined",fullWidth:!0,onChange:function(e){return se((function(t){return Object(m.a)(Object(m.a)({},t),{},{name:e.target.value})}))},value:ie.name}),Object(h.jsxs)(F.a,{display:"flex",justifyContent:"flex-start",my:2,children:[Object(h.jsx)(F.a,{mr:1,children:Object(h.jsx)(v.a,{type:"number",variant:"outlined",label:"Amount",name:"amount",id:"amount",value:ie.amount,onChange:function(e){return se((function(t){return Object(m.a)(Object(m.a)({},t),{},{amount:parseFloat(e.target.value)})}))}})}),Object(h.jsx)(v.a,{type:"text",label:"Measuring unit",variant:"outlined",name:"measurement",id:"measurement",value:ie.measurement,onChange:function(e){return se((function(t){return Object(m.a)(Object(m.a)({},t),{},{measurement:e.target.value})}))}})]})]}),Object(h.jsx)(w.a,{variant:"contained",color:ie.name.length>=2?"primary":"disabled",fullWidth:!0,disabled:ie.name.length<2,style:{fontWeight:700},onClick:de,children:"Add ingredient"}),Object(h.jsx)(F.a,{pt:1,children:Object(h.jsx)(w.a,{fullWidth:!0,onClick:ue,color:"secondary",children:"Cancel"})})]})})})})},nt=n(52),at=nt.a.ul(qe||(qe=Object(Ye.a)(["\n  width: 100%;\n  padding: 0;\n  > li {\n    margin-bottom: 12px;\n    background-color: #fff;\n    list-style: none;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 5px 20px;\n    border-radius: 5px;\n    box-sizing: border-box;\n    min-height: 60px;\n    svg {\n      fill: #212121;\n    }\n  }\n"]))),rt=function(e){var t=e.recipeid,n=e.userIsOwner,r=e.handleAuthenticatedEndpointRequest,c=(e.setTotalCalories,e.setUseablePercentage,e.setTotalWeight,Object(Ze.b)()),i=Object(a.useState)(!1),s=Object(u.a)(i,2),j=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),f=p[0],x=p[1],O=Object(a.useState)({miscOrFi:"",id:0}),m=Object(u.a)(O,2),v=m[0],y=m[1],k=function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/mi/"));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/deletemi/").concat(n),"DELETE");case 3:200===(a=e.sent).status?c.setQueryData("miscIngredients",(function(e){return e.filter((function(e){return e.ID!==n}))})):console.log("nono"),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=Object(ge.a)("miscIngredients",k),I=S.isError,A=S.isLoading;return Object(h.jsxs)(F.a,{mt:6,children:[Object(h.jsx)(Ve.a,{open:j,style:{zIndex:1001},children:Object(h.jsx)(tt,{hide:function(){return d(!1)},recipeid:t,handleAuthenticatedEndpointRequest:r})}),Object(h.jsx)(Ve.a,{open:f,style:{zIndex:1001},children:Object(h.jsx)(Ie.a,{children:Object(h.jsxs)(F.a,{p:2,children:[Object(h.jsx)(g.a,{children:"Are you sure you want to delete this ingredient?"}),Object(h.jsxs)(F.a,{pt:2,display:"flex",justifyContent:"flex-end",children:[Object(h.jsx)(w.a,{onClick:function(){return x(!1)},color:"secondary",children:"Cancel"}),Object(h.jsx)(w.a,{color:"primary",onClick:function(){console.log(c.getQueryData("foodIngredients"),c.getQueryData("miscIngredients"),v.id),C(v.id),x(!1)},children:"Confirm"})]})]})})}),Object(h.jsxs)(F.a,{children:[Object(h.jsxs)(F.a,{mb:2,children:[Object(h.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(h.jsx)(g.a,{variant:"h5",style:{fontWeight:700},children:"Ingredients"}),n?Object(h.jsx)(F.a,{display:"flex",justifyContent:"flex-end",children:Object(h.jsxs)(w.a,{color:"primary",variant:"text",onClick:function(){return d(!0)},children:[Object(h.jsx)(Ke.a,{})," Add ingredient"]})}):null]}),!A&&I?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a,{children:"Something went wrong fetching ingredients"}),Object(h.jsx)(w.a,{onClick:function(){S.refetch()},children:"Try again"})]}):null]}),!A&&!I&&S.data.length>0?Object(h.jsx)(at,{children:S.data.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)(g.a,{style:{textTransform:"capitalize",fontWeight:500},children:e.Title}),Object(h.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(h.jsx)(F.a,{pr:3,children:Object(h.jsxs)(g.a,{children:[e.Amount," ",e.Measurement]})}),n?Object(h.jsx)(te.a,{edge:"end","aria-label":"delete",onClick:function(){y({miscOrFi:"mi",id:e.ID}),x(!0)},children:Object(h.jsx)(Qe.a,{})}):null]})]},e.ID)}))}):Object(h.jsx)(g.a,{children:"There are no ingredients in this recipe yet"})]})]})},ct=n(217),it=n(218),st=n(219),ot=n(215),lt=n(220),ut=function(e){var t=e.showConfirm,n=e.hide,a=e.confirm,r=e.itemName;return Object(h.jsx)(Ve.a,{open:t,style:{zIndex:1001},children:Object(h.jsx)(Ie.a,{children:Object(h.jsxs)(F.a,{p:2,children:[Object(h.jsxs)(g.a,{children:["Are you sure you want to delete this ",r,"?"]}),Object(h.jsxs)(F.a,{pt:2,display:"flex",justifyContent:"flex-end",children:[Object(h.jsx)(w.a,{onClick:n,color:"secondary",children:"Cancel"}),Object(h.jsx)(w.a,{color:"primary",onClick:a,children:"Confirm"})]})]})})})},jt=n(213),dt=n(214),bt=nt.a.div(Ge||(Ge=Object(Ye.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n  > div {\n    max-width: 960px;\n  }\n"]))),pt=function(e){var t=e.steps,n=e.quitCooking,r=Object(a.useState)(0),c=Object(u.a)(r,2),i=c[0],s=c[1],o=t.length,l=t[i];return Object(h.jsx)(bt,{children:Object(h.jsxs)(F.a,{justifyContent:"space-around",flexDirection:"column",alignItems:"center",display:"flex",flexGrow:1,children:[Object(h.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(h.jsx)(w.a,{disabled:!i,onClick:function(){return s((function(e){return e+-1}))},children:"Previous step"}),Object(h.jsx)(F.a,{mx:2,children:Object(h.jsx)(w.a,{color:"primary",variant:"contained",disableElevation:!0,disabled:o<=1||i+1===o,onClick:function(){return s((function(e){return e+1}))},children:Object(h.jsxs)(F.a,{alignItems:"center",display:"flex",children:[Object(h.jsx)(F.a,{pr:1,alignItems:"center",display:"flex",children:Object(h.jsx)(jt.a,{})}),Object(h.jsx)(g.a,{children:"Next Step"})]})})}),Object(h.jsx)(te.a,{onClick:function(){n(),s(0)},color:"secondary",children:Object(h.jsx)(dt.a,{})})]}),Object(h.jsxs)(F.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(h.jsx)("h1",{children:l.StepDescription}),Object(h.jsxs)(F.a,{display:"flex",children:[Object(h.jsx)(F.a,{pr:1,children:Object(h.jsx)(ot.a,{})}),Object(h.jsxs)(g.a,{children:[l.DurationInMinutes," minutes"]})]})]})]})})},ht=Object(R.a)((function(e){return{}})),ft=function(e){var t=e.recipeid,n=e.hide,r=e.handleAuthenticatedEndpointRequest,c=e.buttonText,i=e.firstInputName,s=Object(a.useState)(""),j=Object(u.a)(s,2),d=j[0],b=j[1],p=Object(a.useState)(!1),f=Object(u.a)(p,2),x=f[0],O=f[1],m=Object(a.useState)(0),C=Object(u.a)(m,2),S=C[0],A=C[1],N=Object(a.useState)(""),L=Object(u.a)(N,2),R=L[0],E=L[1],T=Object(a.useState)(0),P=Object(u.a)(T,2),W=P[0],z=P[1],B=Object(I.b)().enqueueSnackbar,U=ht(),M=function(){b(""),A(0),n()},q=Object(Ze.b)(),G=function(){var e=Object(l.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/method"),"POST",JSON.stringify({DurationInMinutes:parseFloat(S),StepDescription:d,Timer:x,ActionAfterTimer:R,TimerDuration:parseFloat(W)}));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,q.setQueryData("methodSteps",(function(e){return[].concat(Object(Je.a)(e),[a])})),B("Succesfully added a new step",{variant:"success"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:M();case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(ve.a,{style:{minWidth:"60%"},children:Object(h.jsxs)(F.a,{p:3,children:[Object(h.jsx)(F.a,{pb:2,children:Object(h.jsx)(g.a,{variant:"h4",children:"Add a new instruction"})}),Object(h.jsx)(v.a,{multiline:!0,type:"text",onChange:function(e){return b(e.target.value)},value:d,fullWidth:!0,variant:"filled",label:i}),Object(h.jsx)(F.a,{mt:2,children:Object(h.jsx)(v.a,{type:"number",onChange:function(e){return(t=e.target.value)<0&&A(0),void A(t);var t},value:S,fullWidth:!0,variant:"filled",inputProps:{className:U.input},label:"Duration in minutes"})}),Object(h.jsx)(F.a,{children:Object(h.jsx)(y.a,{control:Object(h.jsx)(k.a,{size:"medium",checked:x,onChange:function(){return O((function(e){return!e}))},name:"public",color:"primary"}),label:"Do you need a timer for this step?"})}),x?Object(h.jsxs)(F.a,{children:[Object(h.jsx)(F.a,{children:Object(h.jsx)(v.a,{variant:"filled",value:W,type:"number",label:"Timer duration",onChange:function(e){return z(e.target.value)}})}),Object(h.jsx)(F.a,{children:Object(h.jsx)(v.a,{variant:"filled",value:R,type:"text",label:"What should happen after the timer?",fullWidth:!0,onChange:function(e){return E(e.target.value)}})})]}):null,Object(h.jsxs)(F.a,{py:2,display:"flex",children:[Object(h.jsx)(F.a,{pr:1,children:Object(h.jsx)(w.a,{onClick:M,color:"secondary",children:"Cancel"})}),Object(h.jsx)(w.a,{fullWidth:!0,variant:"contained",disabled:d.length<=2,color:d.length<=2?"disabled":"primary",style:{fontWeight:700},onClick:G,children:c})]})]})})},xt=n(216),Ot=function(e){var t=e.curStep,n=e.hide,r=e.stepid,c=e.recipeid,i=e.handleAuthenticatedEndpointRequest,s=e.handleDeleteButtonClicked,j=Object(a.useState)(0),d=Object(u.a)(j,2),b=d[0],p=d[1],f=Object(a.useState)(""),x=Object(u.a)(f,2),O=x[0],m=x[1],g=Object(a.useState)(!1),C=Object(u.a)(g,2),S=C[0],A=C[1],N=Object(a.useState)(0),L=Object(u.a)(N,2),R=L[0],E=L[1],T=Object(a.useState)(""),P=Object(u.a)(T,2),W=P[0],z=P[1],B=function(){m(""),p(0),n()},U=Object(I.b)().enqueueSnackbar,M=Object(Ze.b)(),q=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("yes"),t={durationInMinutes:parseFloat(b),stepDescription:O,inclTimer:S,actionAfterTimer:W,timerDuration:parseFloat(R)},e.next=4,i("".concat(D.API_URL,"/api/recipes/detail/").concat(c,"/method/").concat(r),"PATCH",JSON.stringify(t));case 4:200===e.sent.status?(M.setQueryData("methodSteps",(function(e){return e.map((function(e){return e.ID===r&&(e.StepDescription=O,e.DurationInMinutes=b,S?(e.ActionAfterTimer=W,e.TimerDuration=R):(e.TimerDuration=0,e.ActionAfterTimer="")),e}))})),U("Succesfully updated methodstep",{variant:"success"})):U("Something went wrong updating. Please try again",{variant:"error"}),B();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=t.StepDescription,n=t.StepDuration,a=t.TimerDuration,r=t.ActionAfterTimer;p(n||0===n?n:0),m(e||"");var c=!!a;A(c),c&&(z(r),E(a))}),[t]),Object(h.jsx)(ve.a,{style:{minWidth:"50%"},children:Object(h.jsx)(F.a,{p:2,children:t.StepDescription?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v.a,{multiline:!0,type:"text",onChange:function(e){return m(e.target.value)},value:O,fullWidth:!0,variant:"outlined",label:"description"}),Object(h.jsx)(F.a,{pt:2,children:Object(h.jsx)(v.a,{type:"number",onChange:function(e){return(t=e.target.value)<0&&p(0),void p(t);var t},value:b,fullWidth:!0,variant:"outlined",label:"Duration in minutes"})}),Object(h.jsx)(F.a,{children:Object(h.jsx)(y.a,{control:Object(h.jsx)(k.a,{size:"medium",checked:S,onChange:function(){return A((function(e){return!e}))},name:"public",color:"primary"}),label:"Do you need a timer for this step?"})}),S?Object(h.jsxs)(F.a,{display:"flex",mt:2,children:[Object(h.jsx)(F.a,{flexGrow:1,pr:1,children:Object(h.jsx)(v.a,{fullWidth:!0,variant:"outlined",value:R,type:"number",label:"Timer duration",onChange:function(e){return E(e.target.value)}})}),Object(h.jsx)(F.a,{flexGrow:1,children:Object(h.jsx)(v.a,{variant:"outlined",value:W,type:"text",label:"What should happen after the timer?",fullWidth:!0,onChange:function(e){return z(e.target.value)}})})]}):null,Object(h.jsxs)(F.a,{py:2,display:"flex",children:[Object(h.jsx)(F.a,{pr:1,children:Object(h.jsx)(w.a,{onClick:B,color:"secondary",children:"Cancel"})}),Object(h.jsxs)(w.a,{fullWidth:!0,style:{marginRight:"10px"},variant:"contained",disableElevation:!0,color:"secondary",onClick:function(){return s(t.StepNumber)},children:[Object(h.jsx)(xt.a,{})," Delete step"]}),Object(h.jsx)(w.a,{fullWidth:!0,variant:"contained",disabled:O.length<=2||O===t.Description&&b===t.Duration,color:O.length<=2||O===t.Description&&b===t.Duration?"disabled":"primary",style:{fontWeight:700},onClick:q,disableElevation:!0,children:"Save Step"})]})]}):null})})},mt=function(e){var t=e.Instruction,n=e.userIsOwner,a=e.edit,r=e.length,c=e.index,i=e.handleChangeOrderButtonClicked;return Object(h.jsx)(E.a,{item:!0,sm:12,xs:12,md:6,lg:4,children:Object(h.jsx)(Ie.a,{elevation:0,style:{height:"100%"},children:Object(h.jsxs)(F.a,{p:3,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[Object(h.jsxs)(F.a,{children:[Object(h.jsxs)(F.a,{pb:2,display:"flex",justifyContent:"space-between",children:[Object(h.jsxs)(g.a,{style:{fontSize:25,fontWeight:700},children:["Step ",t.StepNumber]}),n?Object(h.jsxs)(F.a,{children:[Object(h.jsx)(te.a,{disabled:!c,onClick:function(){return i(c,c-1)},children:Object(h.jsx)(ct.a,{})}),Object(h.jsx)(te.a,{disabled:r>1&&c+1===r,onClick:function(){return i(c,c+1)},children:Object(h.jsx)(S.a,{})}),Object(h.jsx)(te.a,{onClick:function(){a(t.ID)},children:Object(h.jsx)(it.a,{})})]}):null]}),Object(h.jsx)(g.a,{style:{fontSize:22,opacity:.6},children:t.StepDescription})]}),Object(h.jsxs)(F.a,{pt:3,display:"flex",justifyContent:"flex-end",children:[t.TimerDuration?Object(h.jsx)(F.a,{mr:2,display:"flex",justifyContent:"flex-end",children:Object(h.jsx)(st.a,{})}):null,Object(h.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(h.jsx)(F.a,{mr:1,display:"flex",alignItems:"center",children:Object(h.jsx)(ot.a,{})}),Object(h.jsxs)(g.a,{children:[t.DurationInMinutes," minutes"]})]})]})]})})})},gt=function(e){var t=e.recipeid,n=e.userIsOwner,r=e.handleAuthenticatedEndpointRequest,c=e.setTotalTime,i=Object(a.useState)(!1),s=Object(u.a)(i,2),j=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),f=p[0],x=p[1],O=Object(a.useState)(!1),v=Object(u.a)(O,2),y=v[0],k=v[1],C=Object(a.useState)(!1),S=Object(u.a)(C,2),I=S[0],A=S[1],N=Object(a.useState)(0),L=Object(u.a)(N,2),R=L[0],T=L[1],P=Object(a.useState)({}),W=Object(u.a)(P,2),z=W[0],B=W[1],U=Object(Z.a)(),M=Object(Ze.b)(),q=Object(ee.a)(U.breakpoints.down("sm")),G=function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/method/"));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=Object(ge.a)("methodSteps",G),_=H.data,Y=H.isError,V=H.isLoading,K=H.refetch,Q=function(e){var t=_.filter((function(t){return t.ID===e}))[0];t?(B(t),T(e),x(!0)):console.log("something went wrong: no step selected. id: ".concat(e,", data: ").concat(_))},J=function(){var e=Object(l.a)(o.a.mark((function e(n,a){var c,i,s,l,u,j,d,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(Je.a)(_),i=Object(m.a)({},c[n]),s=Object(m.a)({},c[a]),l=i.StepNumber,u=s.StepNumber,j=c.map((function(e,t){return t===n?(console.log("replacing first one"),Object(m.a)(Object(m.a)({},e),{},{StepNumber:u})):t===a?(console.log("replacing second one"),Object(m.a)(Object(m.a)({},e),{},{StepNumber:l})):e})),d={step1:{stepID:i.ID,changingTo:s.StepNumber},step2:{stepID:s.ID,changingTo:i.StepNumber}},e.next=9,r("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/switchsteps/"),"PATCH",JSON.stringify(d));case 9:b=e.sent,console.log(b.status),200===b.status?M.setQueryData("methodSteps",(function(){return j})):M.setQueryData("methodSteps",(function(){return c}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/method/").concat(R),"DELETE");case 2:200===e.sent.status&&M.setQueryData("methodSteps",(function(e){return e.filter((function(e){return e.StepNumber!==R})).map((function(e){return e.StepNumber>R?Object(m.a)(Object(m.a)({},e),{},{StepNumber:e.StepNumber-1}):e}))})),x(!1),A(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(!Y&&!V){var e=Object(Je.a)(_);e.sort((function(e,t){return e.StepNumber-t.StepNumber})),M.setQueryData("methodSteps",(function(){return e}))}}),[Y,V,_,M,c]);var X=Y||V||!_.length?0:_.length;return console.log(_),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ve.a,{open:j,style:{zIndex:1001},children:Object(h.jsx)(ft,{handleAuthenticatedEndpointRequest:r,buttonText:"add instruction",firstInputName:"New Instruction",recipeid:t,hide:function(){return d(!1)}})}),Object(h.jsx)(Ve.a,{open:f,style:{zIndex:1001},children:Object(h.jsx)(Ot,{handleAuthenticatedEndpointRequest:r,handleDeleteButtonClicked:function(e){T(e),A(!0)},stepid:z.ID,curStep:z,curStepDuration:z.DurationInMinutes,curStepDescription:z.StepDescription,recipeid:t,hide:function(){return x(!1)}})}),Object(h.jsx)(ut,{hide:function(){return A(!1)},itemName:"Instruction",showConfirm:I,confirm:$}),Object(h.jsxs)(F.a,{py:3,children:[Object(h.jsxs)(F.a,{display:"flex",justifyContent:"space-between",children:[Object(h.jsx)(g.a,{variant:"h5",style:{fontWeight:700},children:"Instructions"}),Object(h.jsxs)(F.a,{display:"flex",children:[n?Object(h.jsxs)(w.a,{color:"primary",variant:"text",onClick:function(){return d(!0)},children:[Object(h.jsx)(Ke.a,{})," instruction"]}):null,!Y&&!V&&_.length>0?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ve.a,{open:y,style:{zIndex:1001},children:Object(h.jsx)(pt,{steps:_,quitCooking:function(){return k(!1)}})}),Object(h.jsx)(F.a,{ml:2,children:q?Object(h.jsx)(te.a,{color:"primary",onClick:function(){return k(!0)},children:Object(h.jsx)(lt.a,{})}):Object(h.jsxs)(w.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(){return k(!0)},children:["Start Cookin' ",Object(h.jsx)(lt.a,{})]})})]}):null]})]}),Object(h.jsxs)(F.a,{pt:2,children:[Y&&!V?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a,{children:"Something went wrong fetching the steps for this recipe"}),Object(h.jsx)(w.a,{onClick:K,children:"Try Again"})]}):null,Y||V?null:Object(h.jsx)(F.a,{children:_.length>0?Object(h.jsx)(E.a,{container:!0,spacing:2,alignItems:"stretch",children:_.map((function(e,t){return Object(h.jsx)(mt,{userIsOwner:n,Instruction:e,edit:Q,length:X,index:t,handleChangeOrderButtonClicked:J},e.StepNumber)}))}):Object(h.jsx)(g.a,{children:"There are no method steps yet"})})]})]})]})},vt=n.p+"static/media/pexels-anna-tukhfatullina-food-photographerstylist-2611817.be4b5a14.jpeg",yt=n(221),kt=n(222),wt=nt.a.div(He||(He=Object(Ye.a)(["\n  position: absolute;\n  top: 10px;\n  right: 20px;\n  display: flex;\n  align-items: center;\n  color: #fff;\n  svg {\n    fill: #fff;\n  }\n"]))),Ct=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(o.a.mark((function e(a,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(D.API_URL,"/api/recipes/like/").concat(t),"POST");case 2:if(200===(c=e.sent).status){e.next=7;break}throw new Error(c.status);case 7:return e.abrupt("return",a("ok"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),St=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(o.a.mark((function e(a,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(D.API_URL,"/api/recipes/like/").concat(t),"DELETE");case 2:if(200===(c=e.sent).status){e.next=7;break}throw new Error(c.status);case 7:return e.abrupt("return",a("ok"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),It=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(o.a.mark((function e(a,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(D.API_URL,"/api/recipes/likedbyuser/").concat(t),"GET");case 2:200===(c=e.sent).status?a({liked:!0}):404===c.status?a({liked:!1}):r("error checking if liked by user");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),At=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D.API_URL,"/api/recipes/detail/").concat(t,"/likes"));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Dt,Nt=function(e){var t=e.recipeid,n=e.handleAuthenticatedEndpointRequest,r=Object(a.useState)(!1),c=Object(u.a)(r,2),i=c[0],s=c[1],j=Object(ge.a)("likedByUser",Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),d=Object(ge.a)("likes",Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),b=Object(Ze.b)(),p=Object(I.b)().enqueueSnackbar,f=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,Ct(t,n);case 4:b.setQueryData("likedByUser",{liked:!0}),b.setQueryData("likes",(function(e){return{Likes:e.Likes+1}})),p("Succesfully added the recipe to your favourites"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p("Something went wrong adding this recipe to your favourites");case 12:s(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,St(t,n);case 4:b.setQueryData("likedByUser",{liked:!1}),b.setQueryData("likes",(function(e){return{Likes:e.Likes-1}})),p("Succesfully removed the recipe from your favourites"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p("Something went wrong removing this recipe from your favourites");case 12:s(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(wt,{children:d.isLoading||d.isError||j.isLoading||j.isError?null:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(te.a,{disabled:i,onClick:j.data.liked?x:f,children:j.data.liked?Object(h.jsx)(yt.a,{}):Object(h.jsx)(kt.a,{})}),Object(h.jsx)(g.a,{children:d.data.Likes})]})})},Lt=Object(R.a)((function(e){return{mainContainer:Object(_.a)({background:e.palette.primary.main,display:"flex",alignItems:"flex-end",minHeight:"150px",width:"100%",borderRadius:"15px",paddingLeft:"40px",position:"relative",marginBottom:"100px"},e.breakpoints.down("sm"),{paddingLeft:"15px"}),image:Object(_.a)({width:"150px",height:"150px",borderRadius:"100%",backgroundColor:"#fff",marginRight:"20px",transform:"translateY(25%)",display:"flex",justifyContent:"stretch",alignItems:"stretch",overflow:"hidden",border:"10px solid #fff"},e.breakpoints.down("sm"),{width:120,height:120}),recipeTitle:Object(_.a)({color:"#fff",fontWeight:"700",fontSize:30},e.breakpoints.down("sm"),{fontSize:20}),recipeCreator:Object(_.a)({color:"#FFE693",fontSize:20},e.breakpoints.down("sm"),{fontSize:15}),likeDisplayText:{color:e.palette.secondary.main}}})),Rt=nt.a.div(Dt||(Dt=Object(Ye.a)(["\n  background: url(",");\n  width: 100%;\n  height: 100%;\n  background-position: center;\n  background-size: 100%;\n"])),(function(e){return e.image}));var Et=function(e){var t=e.handleAuthenticatedEndpointRequest,n=e.data,a=e.userIsOwner,r=e.recipeid,c=Lt();return Object(h.jsx)(be.a,{in:!0,children:Object(h.jsxs)(F.a,{className:c.mainContainer,children:[Object(h.jsx)(Nt,{handleAuthenticatedEndpointRequest:t,recipeid:r}),Object(h.jsx)(F.a,{className:c.image,children:Object(h.jsx)(Rt,{image:n.ImageURL?"https://lembasbucket.s3.eu-central-1.amazonaws.com/"+n.ImageURL:vt,alt:n.Title})}),Object(h.jsxs)(F.a,{py:2,children:[Object(h.jsx)(g.a,{variant:"h1",className:c.recipeTitle,children:n.Title}),Object(h.jsxs)(g.a,{className:c.recipeCreator,children:["Created by ",a?"You":n.Owner.username]})]})]})})};var Ft=function(e){var t=e.userInfo,n=e.handleAuthenticatedEndpointRequest,r=Object(I.b)().enqueueSnackbar,c=Object(O.f)(),i=Object(O.g)().params,s=Object(a.useState)(!1),j=Object(u.a)(s,2),d=j[0],b=j[1],p=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(D.API_URL,"/api/recipes/detail/").concat(i.id));case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",t.json());case 7:throw new Error("Error. status",t.status);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=Object(ge.a)("recipe",p),x=f.data,m=f.isLoading,g=f.isError;return!m&&g&&(r("error fetching recipe, please try again or a different recipe",{variant:"error"}),c.goBack()),Object(a.useEffect)((function(){g&&c.goBack(),m||g||b(x.Owner.username===t.username)}),[x,t,m,g,c]),console.log(x),Object(h.jsx)(h.Fragment,{children:m?Object(h.jsx)(C.a,{}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(q.a,{maxWidth:"md",children:[Object(h.jsx)(Et,{data:x,userIsOwner:d,handleAuthenticatedEndpointRequest:n,recipeid:i.id}),Object(h.jsx)(rt,{userIsOwner:d,recipeid:i.id,handleAuthenticatedEndpointRequest:n}),Object(h.jsx)(gt,{recipeid:i.id,userIsOwner:d,handleAuthenticatedEndpointRequest:n})]})})})},Tt=n(234),Pt=n(225),Wt=n(223),zt=n(224),Bt=Object(R.a)({CardImage:{width:"100%",transform:"scale(1.05)",filter:"brightness(70%)"},CardHeader:{fontSize:"1.5rem",fontWeight:"500",color:"#fff",textTransform:"capitalize"},CenterStuff:{display:"flex",flexDirection:"column",alignItems:"center"},"@keyframes grow":{"0%":{transform:"translateY(0)"},"100%":{transform:"translateY(-10px)"}},"@keyframes shrink":{"0%":{transform:"translateY(-10px)"},"100%":{transform:"translateY(0)"}},CardOnHover:{animation:"$grow .3s",animationFillMode:"both"},CardNeutral:{animation:"$shrink .3s",animationFillMode:"both"},CardContent:{backgroundColor:"transparent",width:"100%",position:"absolute",bottom:0,left:0,padding:"2rem",zIndex:3,pointerEvents:"none"},LikeBox:{position:"absolute",zIndex:4,display:"flex",alignItems:"center",top:0,left:0,"& svg":{fill:"#fff",fontSize:"1.5rem"},"& span":{color:"#fff",fontWeight:500,fontSize:"1rem"}}});var Ut=function(e){var t=e.handleLikeButtonClick,n=e.handleDislikeButtonClick,r=e.recipe,c=e.navigate,i=Object(a.useState)(!1),s=Object(u.a)(i,2),j=s[0],d=s[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),f=p[0],x=p[1],O=Object(a.useState)(!1),m=Object(u.a)(O,2),v=m[0],y=m[1],k=Object(a.useState)(!1),w=Object(u.a)(k,2),C=w[0],S=w[1],A=Object(I.b)().enqueueSnackbar,D=Bt(),N=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,t(r.ID);case 4:A("Succesfully added the recipe to your favourites"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),A("something went wrong adding this recipe to favourites");case 10:S(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,n(r.ID);case 4:A("Succesfully removed the recipe from your favourites"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),A("something went wrong removing this recipe from your favourites");case 10:S(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(E.a,{item:!0,md:4,xs:12,sm:6,lg:3,children:Object(h.jsx)(be.a,{in:f||!r.ImageURL,children:Object(h.jsx)(Ie.a,{className:j?D.CardOnHover:D.CardNeutral,onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:Object(h.jsxs)(F.a,{position:"relative",style:{cursor:"pointer"},children:[Object(h.jsxs)(F.a,{className:D.LikeBox,pl:1,pt:1,children:[Object(h.jsx)(te.a,{onClick:r.LikedByUser?L:N,disabled:C,children:r.LikedByUser?Object(h.jsx)(Wt.a,{color:"primary"}):Object(h.jsx)(zt.a,{})}),Object(h.jsx)(g.a,{style:{pointerEvents:"none",color:"#fff"},variant:"h6",children:r.Likes})]}),r.ImageURL&&!v?Object(h.jsx)(Pt.a,{onClick:function(){return c("/recipes/detail/".concat(r.ID))},children:Object(h.jsx)("img",{src:"https://lembasbucket.s3.eu-central-1.amazonaws.com/"+r.ImageURL,className:D.CardImage,onLoad:function(){return x(!0)},onError:function(e){console.log("e",e),y(!0)},alt:r.Title})}):Object(h.jsx)(Pt.a,{onClick:function(){return c("/recipes/detail/".concat(r.ID))},children:Object(h.jsx)("img",{src:vt,className:D.CardImage,onLoad:function(){return x(!0)},alt:r.Title})}),Object(h.jsx)(ze.a,{className:D.CardContent,children:Object(h.jsx)(g.a,{variant:"h6",className:D.CardHeader,children:r.Title})})]})})})})},Mt=function(e){var t,n=Object(I.b)().enqueueSnackbar,r=e.navigate,c=e.url,i=e.handleAuthenticatedEndpointRequest,s=e.handleAddToFavourites,u=e.handleRemoveFromFavourites,j=Object(O.f)(),d=Object(Ze.b)(),b=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageParam,r=void 0===a?0:a,e.abrupt("return",new Promise(function(){var e=Object(l.a)(o.a.mark((function e(t,a){var s,l,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("".concat(c,"?offset=").concat(r),"GET");case 2:return 200!==(s=e.sent).status&&(n("Something went wrong fetching recipes",{variant:"error"}),a(s.status)),e.next=6,s.json();case 6:return l=e.sent,u=l.length>=10,j={recipes:l,nextPage:u?r+10:void 0},e.abrupt("return",t(j));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=Object(Tt.a)("recipes",b,{getNextPageParam:function(e){return e.nextPage}}),f=p.data,x=p.isFetching,m=p.fetchNextPage,v=p.hasNextPage,y=p.isError,k=p.isFetchingNextPage;if(y)return n("Something went wrong fetching recipes, please try again later."),j.goBack();var S=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:n=f.pages.map((function(e){return e.recipes=e.recipes.map((function(e){return e.ID===t&&(e.Likes+=1,e.LikedByUser=!0),e})),e})),d.setQueryData("recipes",(function(e){return{pages:n,pageParams:e.pageParams}})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(D.API_URL,"/api/recipes/listfav/")===c,e.prev=1,e.next=4,u(t);case 4:a=f.pages.map((function(e){return e.recipes=n?e.recipes.filter((function(e){return e.ID!==t})):e.recipes=e.recipes.map((function(e){return e.ID===t&&(e.Likes-=1,e.LikedByUser=!1),e})),e})),d.setQueryData("recipes",(function(e){return{pages:a,pageParams:e.pageParams}})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return console.log(f),Object(h.jsx)(F.a,{maxHeight:"80vh",overflow:"scroll",pt:3,children:x&&!k?Object(h.jsx)(F.a,{display:"flex",justifyContent:"center",children:Object(h.jsx)(C.a,{})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(E.a,{container:!0,direction:"row",spacing:2,alignContent:"flex-start",alignItems:"flex-start",children:null===(t=f.pages)||void 0===t?void 0:t.map((function(e,t){var n;return Object(h.jsx)(a.Fragment,{children:null===(n=e.recipes)||void 0===n?void 0:n.map((function(e,n){return Object(h.jsx)(Ut,{handleLikeButtonClick:S,handleDislikeButtonClick:A,recipe:e,navigate:r,index:n,pageIndex:t},e.ID)}))},t)}))}),0===f.pages.length?Object(h.jsxs)(F.a,{py:30,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(h.jsx)(g.a,{variant:"h6",children:"No recipes were found. Why dont you try making one:"}),Object(h.jsx)(F.a,{pt:5,children:Object(h.jsx)(w.a,{color:"primary",variant:"contained",onClick:function(){return r("/recipes/create")},disableElevation:!0,children:"Create a recipe"})})]}):null,v&&f.pages.length>0?Object(h.jsx)(F.a,{display:"flex",justifyContent:"center",py:4,color:"secondary",children:Object(h.jsx)(w.a,{onClick:m,variant:"outlined",children:"See more recipes"})}):null]})})},qt=function(e){var t=e.navigate,n=e.handleAuthenticatedEndpointRequest,r=Object(a.useState)(!1),c=Object(u.a)(r,2),i=c[0],s=c[1],j=Object(I.b)().enqueueSnackbar,d=Object(O.f)(),b=Object(Oe.a)({initialValues:{title:"",serves:1},onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(a){var r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,r={Title:a.title,Serves:parseInt(a)},e.next=5,n("".concat(D.API_URL,"/api/recipes/create/"),"POST",JSON.stringify(r));case 5:if(201!==(c=e.sent).status){e.next=14;break}return j("Recipe was succesfully saved",{variant:"success"}),console.log(c),e.next=11,c.json();case 11:i=e.sent,console.log("data:",i),t("/recipes/detail/".concat(i.ID));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),j("Something went wrong saving your recipe. Please try again",{variant:"error"}),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Create a new recipe"})}),Object(h.jsxs)(we,{title:"Create a recipe",saveButtonText:"Save recipe",cancel:d.goBack,submit:b.submitForm,loading:i,children:[Object(h.jsx)(F.a,{p:1,pl:0,pr:0,children:Object(h.jsx)(v.a,{value:b.values.title,label:"Title",type:"text",id:"title",name:"title",variant:"outlined",onChange:b.handleChange,fullWidth:!0,size:"small",required:!0})}),Object(h.jsx)(F.a,{mb:2,children:Object(h.jsx)(v.a,{value:b.values.serves,onChange:b.handleChange,type:"number",id:"serves",name:"serves",variant:"outlined",fullWidth:!0,size:"small",required:!0,label:"How many people does this recipe serve?"})})]})]})},Gt=n(94),Ht=n.p+"static/media/ella-olsson400_x_300.895d4169.jpeg",_t=n.p+"static/media/jill-wellington400_x_300.a60373bc.jpeg",Yt=n.p+"static/media/lisa-fotios400_x_300.763dc3fa.jpeg",Vt=Object(R.a)((function(e){return{BaseButton:{maxHeight:150,width:"100%",height:"100%",borderRadius:e.shape.borderRadius,overflow:"hidden",position:"relative",boxShadow:e.shadows[3],transition:"transform 300ms","& span":{zIndex:3},"&:hover":{transform:"scale(1.03)"}},Container:Object(_.a)({},e.breakpoints.down("sm"),{marginTop:e.spacing(4)}),CardAction:{background:"linear-gradient(to right, ".concat(e.palette.primary.main," 20%, rgba(0,0,0,0))"),height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",position:"absolute",zIndex:1},CardTopHeader:{color:e.palette.primary.contrastText,maxWidth:"50%",textAlign:"left",fontWeight:300},CardLabel:{color:e.palette.primary.contrastText,marginBottom:"1rem",maxWidth:"50%",textAlign:"left",fontWeight:400},CardButton:{backgroundColor:e.palette.primary.contrastText},CardImage:{width:"100%",height:"100%",transform:"translateX(15%)",zIndex:0}}})),Kt=function(e){var t=e.img,n=e.classes,a=e.url,r=e.action,c=e.label,i=e.navigate,s=e.path;return Object(h.jsx)(E.a,{item:!0,xs:12,sm:12,md:6,lg:4,xl:4,children:Object(h.jsx)(be.a,{in:!0,children:Object(h.jsx)(F.a,{children:Object(h.jsxs)(Gt.a,{onClick:function(){return i(s+a)},className:n.BaseButton,children:[Object(h.jsxs)(F.a,{className:n.CardAction,p:2,children:[Object(h.jsx)(g.a,{className:n.CardTopHeader,children:r}),Object(h.jsx)(g.a,{className:n.CardLabel,variant:"h5",children:c})]}),Object(h.jsx)("img",{className:n.CardImage,src:t,alt:"card-recipe"})]})})})},a)},Qt=function(e){var t=Vt();return Object(h.jsx)(E.a,{container:!0,className:t.Container,spacing:2,children:[{label:"All recipes",url:"/all",img:ye,action:"See"},{label:"My recipes",url:"/my",img:Ht,action:"See"},{label:"My favourite recipes",url:"/fav",img:_t,action:"See"},{label:"New recipe",url:"/create",img:Yt,action:"Create"}].map((function(n){return Object(h.jsx)(Kt,{img:n.img,url:n.url,action:n.action,label:n.label,classes:t,navigate:e.navigate,path:"/recipes"},n.url)}))})};var Jt=function(e){var t=e.navigate,n=e.setActiveRoute,r=e.refresh,c=e.handleAuthenticatedEndpointRequest,i=e.userInfo,s=Object(O.g)().path;Object(a.useEffect)((function(){n("recipes")}),[]);var u=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(o.a.mark((function e(n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("".concat(D.API_URL,"/api/recipes/like/").concat(t),"POST");case 2:if(200===(r=e.sent).status){e.next=7;break}throw new Error(r.status);case 7:return e.abrupt("return",n("ok"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(o.a.mark((function e(n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("".concat(D.API_URL,"/api/recipes/like/").concat(t),"DELETE");case 2:if(200===(r=e.sent).status){e.next=7;break}throw new Error(r.status);case 7:return e.abrupt("return",n("ok"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Recipes"})}),Object(h.jsxs)(O.c,{children:[Object(h.jsx)(O.a,{path:"".concat(s,"/my"),render:function(){return Object(h.jsx)(Mt,{navigate:t,url:"".concat(D.API_URL,"/api/recipes/listmine/"),handleAddToFavourites:u,handleRemoveFromFavourites:j,handleAuthenticatedEndpointRequest:c})}}),Object(h.jsx)(O.a,{path:"".concat(s,"/create"),render:function(){return Object(h.jsx)(qt,{refresh:r,navigate:t,handleAuthenticatedEndpointRequest:c})},refresh:r}),Object(h.jsx)(O.a,{path:"".concat(s,"/fav"),render:function(){return Object(h.jsx)(Mt,{navigate:t,url:"".concat(D.API_URL,"/api/recipes/listfav/"),handleAddToFavourites:u,handleRemoveFromFavourites:j,handleAuthenticatedEndpointRequest:c})}}),Object(h.jsx)(O.a,{path:"".concat(s,"/all"),render:function(){return Object(h.jsx)(Mt,{navigate:t,handleAddToFavourites:u,handleRemoveFromFavourites:j,handleAuthenticatedEndpointRequest:c,url:"".concat(D.API_URL,"/api/recipes/listall/")})}}),Object(h.jsx)(O.a,{path:"".concat(s,"/detail/:id"),render:function(){return Object(h.jsx)(Ft,{userInfo:i,addToFavs:u,removeFromFavs:j,handleAuthenticatedEndpointRequest:c})}}),Object(h.jsx)(O.a,{path:"".concat(s),exact:!0,render:function(){return Object(h.jsx)(Qt,{navigate:t})}})]})]})},$t=function(e){return Object(a.useEffect)((function(){e.setActiveRoute("about")}),[]),Object(h.jsx)(V.a,{in:!0,children:Object(h.jsx)(g.a,{children:"About"})})},Xt="setLoading",Zt="setUserInfo",en="setValidForMPG",tn="setAppRoute",nn=function(e){return{type:Xt,payload:e}},an=function(e){return{type:Zt,payload:e}},rn=function(e){return{type:en,payload:e}},cn=function(e){return{type:tn,payload:e}},sn={mainAppLoading:!0,appRoute:"home",profileValForMPG:!1,userInfo:{username:""}},on=function(e,t){switch(t.type){case Xt:return Object(m.a)(Object(m.a)({},e),{},{mainAppLoading:t.payload});case Zt:return Object(m.a)(Object(m.a)({},e),{},{userInfo:Object(m.a)(Object(m.a)({},e.userInfo),{},{username:t.payload})});case en:return Object(m.a)(Object(m.a)({},e),{},{profileValForMPG:t.payload});case tn:return Object(m.a)(Object(m.a)({},e),{},{appRoute:t.payload});default:return e}};var ln=function(e){var t=e.setAuth,n=e.auth,r=e.refreshOn404,c=Object(a.useReducer)(on,sn),i=Object(u.a)(c,2),s=i[0],j=i[1],d=Object(O.g)().path,b=Object(O.f)(),p=nn,f=cn,x=an,m=rn,g=function(){fetch("".concat(D.API_URL,"/auth/logout/"),{method:"POST",headers:{Authorization:n.Key}}),t({isAuthenticated:!1,Key:""}),localStorage.removeItem("Key"),b.push("/auth/")},v=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,r,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:n.Key,e.prev=1,e.next=4,y("".concat(D.API_URL,"/api/profile/isvalid/"),"GET","",t);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,j(m(r.Valid)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";return console.log("Attempting endpoint fetch at ".concat(e,",\nmethod: ").concat(t,",\n with key ").concat(n.Key,"\n content-type: ").concat(c,", \nbody: ").concat(a||"","\ncontent_type: ").concat(c)),new Promise(function(){var i=Object(l.a)(o.a.mark((function i(s,l){var u,j,d;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,u={method:t,headers:{Authorization:n.Key}},"application/json"===c&&(u.headers["Content-Type"]=c),a&&(u.body=a),i.next=6,fetch(e,u);case 6:if(401!==(j=i.sent).status){i.next=11;break}return console.log(j.status),r(),i.abrupt("return",l("unauthorized"));case 11:if(400!==j.status){i.next=17;break}return i.next=14,j.text();case 14:d=i.sent,console.log(d),l(j.status);case 17:if(200!==j.status&&201!==j.status&&404!==j.status){i.next=21;break}return i.abrupt("return",s(j));case 21:throw new Error("bad request, status code: "+j.status);case 22:i.next=27;break;case 24:return i.prev=24,i.t0=i.catch(0),i.abrupt("return",l("something went wrong fetching endpoint: ".concat(e,": ").concat(i.t0)));case 27:case"end":return i.stop()}}),i,null,[[0,24]])})));return function(e,t){return i.apply(this,arguments)}}())},k=function(e){b.push("".concat(d).concat(e))},w=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("".concat(D.API_URL,"/auth/retrieve/"),"GET");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,j(x(n.Username)),j(p(!1)),v(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n.isAuthenticated?w():b.push("/auth/")}),[n.isAuthenticated,s.mainAppLoading,b]),Object(h.jsx)(I.a,{children:Object(h.jsx)(de,{handleLogoutButtonPressed:g,handleRouteChange:k,appRoute:s.appRoute,auth:n,goBack:function(){b.goBack()},userInfo:s.userInfo,children:s.mainAppLoading?Object(h.jsx)(C.a,{}):Object(h.jsxs)(O.c,{children:[Object(h.jsx)(O.a,{path:"".concat(d,"/profile"),render:function(){return Object(h.jsx)(Le,{auth:n,navigate:k,checkValidForMG:v,userInfo:s.userInfo,handleAuthenticatedEndpointRequest:y,validForMG:s.profileValForMPG,setActiveRoute:function(e){return j(f(e))}})}}),Object(h.jsx)(O.a,{path:"".concat(d,"/planner"),render:function(){return Object(h.jsx)(We,{auth:n,navigate:k,validForMG:s.profileValForMPG,setActiveRoute:function(e){return j(f(e))}})}}),Object(h.jsx)(O.a,{path:"".concat(d,"/recipes"),render:function(){return Object(h.jsx)(Jt,{auth:n,navigate:k,userInfo:s.userInfo,handleAuthenticatedEndpointRequest:y,setActiveRoute:function(e){return j(f(e))}})}}),Object(h.jsx)(O.a,{path:"".concat(d,"/about"),render:function(){return Object(h.jsx)($t,{setActiveRoute:function(e){return j(f(e))}})}}),Object(h.jsx)(O.a,{exact:!0,path:d,render:function(){return Object(h.jsx)(_e,{userInfo:s.userInfo,navigate:k,validForMG:s.profileValForMPG,loading:s.mainAppLoading,setActiveRoute:function(e){return j(f(e))}})}})]})})})},un=new(n(229).a);var jn=function(){var e=Object(a.useState)(!0),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({isAuthenticated:!1,Key:""}),i=Object(u.a)(c,2),s=i[0],j=i[1],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.Key;return new Promise(function(){var t=Object(l.a)(o.a.mark((function t(n,a){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(D.API_URL,"/auth/refresh/"),{method:"POST",headers:{Authorization:e}});case 3:if(200===(r=t.sent).status){t.next=6;break}throw new Error("not authorized");case 6:return t.next=8,r.json();case 8:return c=t.sent,t.abrupt("return",n(c.Key));case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",a("not authorized"));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}())},b=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:s.Key,n||r(!0),e.prev=2,e.next=5,d(t);case 5:a=e.sent,setTimeout((function(){b(a)}),33e5),localStorage.setItem("Key",a),j({isAuthenticated:!0,Key:a}),r(!1),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),s.isAuthenticated&&j({isAuthenticated:!1,Key:""}),localStorage.removeItem("Key"),r(!1);case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=localStorage.getItem("Key");null!=e?b(e):r(!1)}),[]),Object(h.jsx)(Ze.a,{client:un,children:Object(h.jsxs)(x.a,{basename:"/site",children:[Object(h.jsx)(A.a,{children:Object(h.jsx)("title",{children:"Lembas"})}),Object(h.jsx)(f,{children:n?null:Object(h.jsxs)(O.c,{children:[Object(h.jsx)(O.a,{path:"/auth",render:function(){return Object(h.jsx)(U,{auth:s,setAuth:j,loading:n})}}),Object(h.jsx)(O.a,{path:"/app",render:function(){return Object(h.jsx)(ln,{setAuth:j,auth:s,refreshOn404:b})}}),Object(h.jsx)(O.a,{path:"/",render:function(){return Object(h.jsx)(X,{})}})]})})]})})},dn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},bn=(n(139),document.getElementById("root"));bn.hasChildNodes()?i.a.hydrate(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(jn,{})}),bn):i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(jn,{})}),bn),dn()}},[[140,1,2]]]);
//# sourceMappingURL=main.314df7d2.chunk.js.map